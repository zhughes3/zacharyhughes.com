<!DOCTYPE html>
<html>
<title>Z H</title>
<head>
<link rel="stylesheet" href="bootstrap-4.2.1-dist/css/bootstrap.min.css">
<script src="bootstrap-4.2.1-dist/js/bootstrap.min.js"></script>
</head>
<body>
<nav class="navbar sticky-top navbar-light bg-light">
  <a class="navbar-brand" href="#">ZH</a>
</nav>
<div class="container">
	<p class="lead">Because it's important to document things.</p>
</div>
<script>
  function appendPost(parentContainer, post) {
    var title = post.title;
    var imgSrc = post.img.split('public')[1];
    var date = post.date;
    var description = post.description;
    var id = post._id;
    var tag = post.tag;
    var slug = post.slug;
    var link = `/posts/${slug}`;
    var content = '<div class="card flex-md-row mb-4 shadow-sm h-md-250">';
    content += '<div class="card-body d-flex flex-column align-items-start">';
    content += '<strong class="d-inline-block mb-2 text-primary">' + tag +'</strong>';
    content += '<h3 class="mb-0">';
    content += '<a class="text-dark" href="' + link + '">' + title + '</a>';
    content += '</h3>';
    content += '<div class="mb-1 text-muted">' + date + '</div>';
    content += '<p class="card-text mb-auto">' + description + '</p>';
    content += '<a href="' + link + '">Continue reading</a>';
    content += '<img class="bd-placeholder-img card-img-right flex-auto d-none d-lg-block" src="' + imgSrc + '" alt="" height="250" width="250">';
    content += '</div>';
    content += '</div>';
    parentContainer.innerHTML += content;
  }
  var container = document.getElementsByClassName('container')[0];
  var posts;
  fetch('/posts')
  .then(function(response) {
    return response.json();
  })
  .then(function(json) {
    posts = json;
    posts.forEach(function(post) {
      appendPost(container, post);
    });
    console.log(posts);
  });
</script>

</body>
</html>